{"ast":null,"code":"import _asyncToGenerator from \"/Applications/html/react-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Applications/html/react-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/Applications/html/react-test/src/pages/FilmList.js\",\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"/Applications/html/react-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport API from \"../utils/api\";\n\nfunction FilmList() {\n  _s();\n\n  var _this = this;\n\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      films = _React$useState2[0],\n      setFilms = _React$useState2[1];\n\n  var _React$useState3 = React.useState([]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      recentBookmark = _React$useState4[0],\n      setRecentBookmark = _React$useState4[1];\n\n  function getfilms() {\n    return _getfilms.apply(this, arguments);\n  }\n\n  function _getfilms() {\n    _getfilms = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var response, json;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return fetch(\"\".concat(API.films));\n\n            case 3:\n              response = _context2.sent;\n\n              if (response.ok) {\n                _context2.next = 6;\n                break;\n              }\n\n              throw new Error(response.text);\n\n            case 6:\n              _context2.next = 8;\n              return response.json();\n\n            case 8:\n              json = _context2.sent;\n              setFilms(json.results);\n              console.log(setFilms, '<<<,');\n              _context2.next = 16;\n              break;\n\n            case 13:\n              _context2.prev = 13;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error(_context2.t0);\n\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 13]]);\n    }));\n    return _getfilms.apply(this, arguments);\n  }\n\n  var getRecentBookmark = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var bookMarked, splitBookmark, promises, _recentBookmark;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return localStorage.getItem(\"filmId\");\n\n            case 2:\n              bookMarked = _context.sent;\n              splitBookmark = bookMarked ? bookMarked.split(\",\") : [];\n              _context.prev = 4;\n              promises = splitBookmark.slice(-3).map(function (id) {\n                return fetch(\"\".concat(API.films, \"/\").concat(id)).then(function (response) {\n                  return response.json();\n                });\n              });\n              _context.next = 8;\n              return Promise.all(promises);\n\n            case 8:\n              _recentBookmark = _context.sent;\n              setRecentBookmark(_recentBookmark.reverse());\n              _context.next = 15;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](4);\n              console.error(_context.t0);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[4, 12]]);\n    }));\n\n    return function getRecentBookmark() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  React.useEffect(function () {\n    getfilms();\n    getRecentBookmark();\n  }, []);\n\n  if (films.length === 0 && recentBookmark.length === 0) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"card-title mb-2 font-weight-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, \"FILM LIST\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"card-title mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 15\n    }\n  }, \"\\u2605\"), \" Recent bookmark\"), recentBookmark.length === 0 ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 15\n    }\n  }, \"Bookmark is empty\") : recentBookmark.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ml-4 mb-1\",\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }\n    }, \"\\u2022\\xA0 \", /*#__PURE__*/React.createElement(Link, {\n      className: \"mb-1\",\n      to: \"/detail/\".concat(item.url.split('/').slice(-2)[0]),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 32\n      }\n    }, \"\".concat(item.title)));\n  }))), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, films.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      className: \"list-group-item\",\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/detail/\".concat(item.url.split('/').slice(-2)[0]),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 15\n      }\n    }, item.title));\n  }))));\n}\n\n_s(FilmList, \"rsxwRSTYCPLpEJ5kkIu1W+DW9G0=\");\n\n_c = FilmList;\nexport default FilmList;\n\nvar _c;\n\n$RefreshReg$(_c, \"FilmList\");","map":{"version":3,"sources":["/Applications/html/react-test/src/pages/FilmList.js"],"names":["React","Link","API","FilmList","useState","films","setFilms","recentBookmark","setRecentBookmark","getfilms","fetch","response","ok","Error","text","json","results","console","log","error","getRecentBookmark","localStorage","getItem","bookMarked","splitBookmark","split","promises","slice","map","id","then","Promise","all","reverse","useEffect","length","item","index","url","title"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport API from \"../utils/api\";\n\nfunction FilmList() {\n  const [films, setFilms] = React.useState([]);\n  const [recentBookmark, setRecentBookmark] = React.useState([]);\n\n  async function getfilms() {\n    try {\n      const response = await fetch(`${API.films}`);\n      if (!response.ok) {\n        throw new Error(response.text);\n      }\n      const json = await response.json();\n      setFilms(json.results);\n      console.log(setFilms,'<<<,')\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  const getRecentBookmark = async () => {\n    let bookMarked = await localStorage.getItem(\"filmId\");\n    let splitBookmark = bookMarked ? bookMarked.split(\",\") : [];\n    try {\n      const promises = splitBookmark\n        .slice(-3)\n        .map((id) =>\n          fetch(`${API.films}/${id}`).then((response) => response.json())\n        );\n      const recentBookmark = await Promise.all(promises);\n      setRecentBookmark(recentBookmark.reverse());\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  React.useEffect(() => {\n    getfilms();\n    getRecentBookmark();\n  }, []);\n\n  if (films.length === 0 && recentBookmark.length === 0 ) {\n    return <div className=\"loader\"></div>\n  }\n\n  return (\n    <div className=\"card\">\n      <div className=\"card-body\">\n        <h3 className=\"card-title mb-2 font-weight-bold\">FILM LIST</h3>\n        <hr />\n        <div className=\"card mb-3\">\n          <div className=\"card-body\">\n            <h5 className=\"card-title mb-2\">\n              <span>&#9733;</span> Recent bookmark\n            </h5>\n            {recentBookmark.length === 0 ? (\n              <p>Bookmark is empty</p>\n            ) : (\n              recentBookmark.map((item, index) => (\n                <div className=\"ml-4 mb-1\" key={index}>\n                  &bull;&nbsp; <Link className=\"mb-1\" to={`/detail/${item.url.split('/').slice(-2)[0]}`}>{`${item.title}`}</Link>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n        <ul className=\"list-group\">\n          {films.map((item, index) => (\n            <li className=\"list-group-item\" key={index}>\n              <Link to={`/detail/${item.url.split('/').slice(-2)[0]}`}>{item.title}</Link>\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n\nexport default FilmList;\n"]},"metadata":{},"sourceType":"module"}