{"ast":null,"code":"import _asyncToGenerator from \"/Applications/html/react-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Applications/html/react-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/Applications/html/react-test/src/pages/FilmDetail.js\",\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"/Applications/html/react-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\";\nimport React from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport API from \"../utils/api\";\n\nfunction FilmDetail() {\n  _s();\n\n  var _this = this;\n\n  var _React$useState = React.useState({}),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      film = _React$useState2[0],\n      setFilm = _React$useState2[1];\n\n  var _React$useState3 = React.useState([]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      characters = _React$useState4[0],\n      setCharacters = _React$useState4[1];\n\n  var _React$useState5 = React.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      bookmark = _React$useState6[0],\n      setBookmark = _React$useState6[1];\n\n  var _useParams = useParams(),\n      id = _useParams.id; // Set bookmark\n\n\n  var toggleBookmark = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var bookMarked, splitBookmark, findBookmark;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return localStorage.getItem(\"filmId\");\n\n            case 2:\n              bookMarked = _context.sent;\n              splitBookmark = bookMarked ? bookMarked.split(\",\") : [];\n              findBookmark = splitBookmark.find(function (item) {\n                return item === id;\n              });\n\n              if (findBookmark === undefined && bookmark === false) {\n                splitBookmark.push(id);\n                localStorage.setItem(\"filmId\", splitBookmark.join(\",\"));\n                setBookmark(true);\n              } else {\n                splitBookmark.splice(splitBookmark.indexOf(id), 1);\n                localStorage.setItem(\"filmId\", splitBookmark.join(\",\"));\n                setBookmark(false);\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function toggleBookmark() {\n      return _ref.apply(this, arguments);\n    };\n  }(); // Get bookmarked\n\n\n  var getBookmark = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var bookMarked, splitBookmark, findBookmark;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return localStorage.getItem(\"filmId\");\n\n            case 2:\n              bookMarked = _context2.sent;\n              splitBookmark = bookMarked ? bookMarked.split(\",\") : [];\n              findBookmark = splitBookmark.find(function (item) {\n                return item === id;\n              });\n\n              if (findBookmark !== undefined) {\n                setBookmark(true);\n              }\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getBookmark() {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // Get film detail\n\n\n  var getFilmDetail = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var response, filmDetail, _characters, allCharacters;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return fetch(\"\".concat(API.films, \"/\").concat(id));\n\n            case 3:\n              response = _context3.sent;\n\n              if (response.ok) {\n                _context3.next = 6;\n                break;\n              }\n\n              throw new Error(response.text);\n\n            case 6:\n              _context3.next = 8;\n              return response.json();\n\n            case 8:\n              filmDetail = _context3.sent;\n              _context3.next = 11;\n              return filmDetail.characters.map(function (item) {\n                return fetch(item).then(function (response) {\n                  return response.json();\n                });\n              });\n\n            case 11:\n              _characters = _context3.sent;\n              _context3.next = 14;\n              return Promise.all(_characters);\n\n            case 14:\n              allCharacters = _context3.sent;\n              setFilm(filmDetail);\n              setCharacters(allCharacters);\n              _context3.next = 22;\n              break;\n\n            case 19:\n              _context3.prev = 19;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.error(_context3.t0);\n\n            case 22:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 19]]);\n    }));\n\n    return function getFilmDetail() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  React.useEffect(function () {\n    getFilmDetail();\n    getBookmark();\n  }, []);\n\n  if (characters.length === 0 && Object.keys(film).length === 0) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-head mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, \"\\xAB Back\"), /*#__PURE__*/React.createElement(\"div\", {\n    onClick: toggleBookmark,\n    className: \"star\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, bookmark ? /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 23\n    }\n  }, \"\\u2605\") : /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 46\n    }\n  }, \"\\u2606\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"card-subtitle mb-3 font-weight-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, film.title), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, film.opening_crawl), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }, \"Episode:\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 40\n    }\n  }), film.episode_id), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }\n  }, \"Director:\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 41\n    }\n  }), film.director)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 15\n    }\n  }, \"Producer:\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 41\n    }\n  }), film.producer), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, \"Release Date:\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 43\n    }\n  }), film.release_date))), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, \"Characters\")), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, characters.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }\n    }, item.name);\n  }))));\n}\n\n_s(FilmDetail, \"gqS9QSa7N8p5p4caAiUhHiYloek=\", false, function () {\n  return [useParams];\n});\n\n_c = FilmDetail;\nexport default FilmDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"FilmDetail\");","map":{"version":3,"sources":["/Applications/html/react-test/src/pages/FilmDetail.js"],"names":["React","useParams","Link","API","FilmDetail","useState","film","setFilm","characters","setCharacters","bookmark","setBookmark","id","toggleBookmark","localStorage","getItem","bookMarked","splitBookmark","split","findBookmark","find","item","undefined","push","setItem","join","splice","indexOf","getBookmark","getFilmDetail","fetch","films","response","ok","Error","text","json","filmDetail","map","then","Promise","all","allCharacters","console","error","useEffect","length","Object","keys","title","opening_crawl","episode_id","director","producer","release_date","index","name"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport API from \"../utils/api\";\n\nfunction FilmDetail() {\n  const [film, setFilm] = React.useState({});\n  const [characters, setCharacters] = React.useState([]);\n  const [bookmark, setBookmark] = React.useState(false);\n  const { id } = useParams();\n\n  // Set bookmark\n  const toggleBookmark = async () => {\n    let bookMarked = await localStorage.getItem(\"filmId\");\n    let splitBookmark = bookMarked ? bookMarked.split(\",\") : [];\n    let findBookmark = splitBookmark.find((item) => item === id);\n    if (findBookmark === undefined && bookmark === false) {\n      splitBookmark.push(id);\n      localStorage.setItem(\"filmId\", splitBookmark.join(\",\"));\n      setBookmark(true);\n    } else {\n      splitBookmark.splice(splitBookmark.indexOf(id), 1);\n      localStorage.setItem(\"filmId\", splitBookmark.join(\",\"));\n      setBookmark(false);\n    }\n  };\n\n  // Get bookmarked\n  const getBookmark = async () => {\n    let bookMarked = await localStorage.getItem(\"filmId\");\n    let splitBookmark = bookMarked ? bookMarked.split(\",\") : [];\n    let findBookmark = splitBookmark.find((item) => item === id);\n    if (findBookmark !== undefined) {\n      setBookmark(true);\n    }\n  };\n\n  // Get film detail\n  const getFilmDetail = async () => {\n    try {\n      const response = await fetch(`${API.films}/${id}`);\n      if (!response.ok) {\n        throw new Error(response.text);\n      }\n      const filmDetail = await response.json();\n      const characters = await filmDetail.characters.map((item) =>\n        fetch(item).then((response) => response.json())\n      );\n      const allCharacters = await Promise.all(characters);\n      setFilm(filmDetail);\n      setCharacters(allCharacters);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  React.useEffect(() => {\n    getFilmDetail();\n    getBookmark();\n  }, []);\n\n  if (characters.length === 0 && Object.keys(film).length === 0) {\n    return <div className=\"loader\"></div>\n  }\n\n  return (\n    <div className=\"card\">\n      <div className=\"page-head mb-3\">\n        <Link to=\"/\" className=\"btn btn-primary\">&laquo; Back</Link>\n        <div onClick={toggleBookmark} className=\"star\">\n          {bookmark ? <span>&#9733;</span> : <span>&#9734;</span>}\n        </div>\n      </div>\n      <div className=\"card-body\">\n        <h3 className=\"card-subtitle mb-3 font-weight-bold\">{film.title}</h3>\n        <hr />\n        <p className=\"mb-4\">{film.opening_crawl}</p>\n        <div className=\"row\">\n          <div className=\"col-md-6\">\n            <p className=\"mb-4\">\n              <strong>Episode:</strong><br/>\n              {film.episode_id}\n            </p>\n            <p>\n              <strong>Director:</strong><br/>\n              {film.director}\n            </p>\n          </div>\n          <div className=\"col-md-6\">\n            <p className=\"mb-4\">\n              <strong>Producer:</strong><br/>\n              {film.producer}\n            </p>\n            <p>\n            <strong>Release Date:</strong><br/>\n              {film.release_date}\n            </p>\n          </div>\n        </div>\n        <hr />\n        <br/>\n        <p>\n          <strong>Characters</strong>\n        </p>\n        <ul>\n          {characters.map((item, index) => (\n            <li key={index}>\n              {item.name}\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n\nexport default FilmDetail;\n"]},"metadata":{},"sourceType":"module"}